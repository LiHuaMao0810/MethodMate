<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新手指引修复测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .tutorial-highlight {
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.5); }
        }
        
        .tutorial-tooltip {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-8 text-center">新手指引修复测试</h1>
        
        <div class="max-w-4xl mx-auto space-y-8">
            <!-- 测试说明 -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">修复内容</h2>
                <div class="space-y-3 text-gray-600">
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>修复了页面滚动导致的定位偏移问题</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>修复了返回前一步时页面状态切换问题</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>添加了前一步按钮，支持双向导航</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>改进了页面状态管理，确保每个步骤在正确的页面</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>移除了页面滚动功能，使用固定定位避免偏移</span>
                    </div>
                </div>
            </div>
            
            <!-- 测试步骤 -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">测试步骤</h2>
                <div class="space-y-4">
                    <div class="p-4 bg-blue-50 rounded-lg">
                        <h3 class="font-medium text-blue-900 mb-2">1. 启动新手指引</h3>
                        <p class="text-blue-700 text-sm">在研究方案详情页面，点击"重置引导"按钮，然后刷新页面启动新手指引</p>
                    </div>
                    
                    <div class="p-4 bg-green-50 rounded-lg">
                        <h3 class="font-medium text-green-900 mb-2">2. 测试导航功能</h3>
                        <p class="text-green-700 text-sm">使用"知道了"按钮前进，使用"上一步"按钮后退，观察页面切换是否正确</p>
                    </div>
                    
                    <div class="p-4 bg-yellow-50 rounded-lg">
                        <h3 class="font-medium text-yellow-900 mb-2">3. 测试键盘快捷键</h3>
                        <p class="text-yellow-700 text-sm">使用左右箭头键切换步骤，Enter/空格键前进，Esc键跳过</p>
                    </div>
                    
                    <div class="p-4 bg-purple-50 rounded-lg">
                        <h3 class="font-medium text-purple-900 mb-2">4. 测试定位准确性</h3>
                        <p class="text-purple-700 text-sm">观察每个步骤是否正确高亮目标元素，没有定位偏移</p>
                    </div>
                </div>
            </div>
            
            <!-- 预期结果 -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">预期结果</h2>
                <div class="space-y-3 text-gray-600">
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>每个步骤都能正确切换到对应的页面状态</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>元素定位准确，使用固定定位避免偏移</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>前后导航都能正确切换页面状态</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                        <span>键盘快捷键响应正常</span>
                    </div>
                </div>
            </div>
            
            <!-- 技术细节 -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">技术修复细节</h2>
                <div class="space-y-4">
                    <div>
                        <h3 class="font-medium text-gray-900 mb-2">页面状态管理</h3>
                        <pre class="bg-gray-100 p-3 rounded text-sm overflow-x-auto"><code>// 根据步骤设置正确的页面状态
if (currentTutorialStep.value === 0) {
  activeSection.value = 'full'  // 生成方案
} else if (currentTutorialStep.value === 4) {
  activeSection.value = 'analysis'
  analysisSubSection.value = 'source'  // 来源介绍
}</code></pre>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-900 mb-2">移除页面滚动</h3>
                        <pre class="bg-gray-100 p-3 rounded text-sm overflow-x-auto"><code>// 移除所有滚动逻辑，只保留元素检测
if (element && typeof element.getBoundingClientRect === 'function') {
  // 只进行输入框聚焦，不进行页面滚动
  if (element.tagName === 'INPUT' && typeof element.focus === 'function') {
    element.focus()
  }
}</code></pre>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-900 mb-2">双向导航支持</h3>
                        <pre class="bg-gray-100 p-3 rounded text-sm overflow-x-auto"><code>// 前一步函数
const prevTutorialStep = () => {
  if (currentTutorialStep.value > 0) {
    currentTutorialStep.value--
    nextTick(() => {
      setTimeout(() => {
        focusCurrentElement()
      }, 300)
    })
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 