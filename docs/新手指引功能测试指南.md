# 新手指引功能测试指南

## 测试环境准备

### 1. 开发环境设置
确保在开发模式下运行项目：
```bash
npm run dev
```

### 2. 清除引导状态
在浏览器控制台中执行以下命令清除引导状态：
```javascript
localStorage.removeItem('paperDetail_tutorial_shown')
```

或者使用页面右下角的"重置引导"按钮（仅在开发模式下显示）。

## 功能测试步骤

### 1. 自动启动测试
1. 清除引导状态
2. 刷新页面或重新访问文献推荐页面
3. 验证是否在1秒后自动启动新手指引
4. 检查遮罩层和高亮区域是否正确显示

### 2. 引导步骤测试
按顺序测试每个引导步骤：

#### 步骤1：输入关键词
- 验证高亮区域是否正确定位到关键词输入框
- 检查提示框内容是否正确
- 验证输入框是否自动获得焦点

#### 步骤2：智能提取关键词
- 验证高亮区域是否正确定位到"提取关键词"按钮
- 检查提示框描述是否准确

#### 步骤3：获取相关文献
- 验证高亮区域是否正确定位到"获取相关文献"按钮
- 检查提示框内容是否正确

#### 步骤4：本地缓存选项
- 验证高亮区域是否正确定位到本地缓存复选框
- 检查提示框描述是否准确

#### 步骤5：扩大搜索范围
- 验证高亮区域是否正确定位到扩大范围复选框
- 检查提示框描述是否准确

#### 步骤6：标记参考文献
- 验证高亮区域是否正确定位到"选为参考"按钮
- 检查提示框描述是否准确

### 3. 交互功能测试

#### 鼠标操作测试
1. **"知道了"按钮**
   - 点击验证是否进入下一步
   - 检查高亮区域是否正确切换到下一个元素
   - 验证提示框内容是否正确更新

2. **"跳过"按钮**
   - 点击验证是否立即结束引导
   - 检查遮罩层是否消失

3. **"下次不提示"按钮**
   - 点击验证是否结束引导并设置不再提示
   - 刷新页面验证是否不再显示引导

#### 键盘快捷键测试
1. **Enter键**
   - 在引导过程中按Enter键
   - 验证是否进入下一步

2. **空格键**
   - 在引导过程中按空格键
   - 验证是否进入下一步

3. **Esc键**
   - 在引导过程中按Esc键
   - 验证是否跳过引导

4. **方向键**
   - 按右方向键验证是否进入下一步
   - 按左方向键验证是否返回上一步（如果存在）

### 4. 响应式设计测试

#### 屏幕尺寸适配
1. **桌面端（>1024px）**
   - 验证提示框位置是否合理
   - 检查高亮区域是否准确

2. **平板端（768px-1024px）**
   - 验证提示框是否自动调整位置
   - 检查是否避免超出屏幕边界

3. **移动端（<768px）**
   - 验证提示框是否适配小屏幕
   - 检查高亮区域是否仍然可见

#### 滚动测试
1. 在引导过程中滚动页面
2. 验证高亮区域是否跟随目标元素
3. 检查提示框位置是否正确更新

### 5. 状态管理测试

#### localStorage测试
1. 完成引导后检查localStorage中是否设置了`paperDetail_tutorial_shown = 'true'`
2. 刷新页面验证是否不再显示引导
3. 清除localStorage后验证是否重新显示引导

#### 开发模式测试
1. 验证开发模式下是否显示"重置引导"按钮
2. 点击重置按钮验证是否清除引导状态
3. 刷新页面验证是否重新显示引导

### 6. 错误处理测试

#### 元素不存在测试
1. 手动删除某个目标元素的ref
2. 启动引导验证是否优雅降级
3. 检查控制台是否有错误信息

#### 快速操作测试
1. 快速连续点击"知道了"按钮
2. 验证是否正常处理快速操作
3. 检查引导步骤是否正确更新

## 性能测试

### 1. 加载性能
1. 使用浏览器开发者工具检查引导相关资源加载时间
2. 验证引导启动是否影响页面其他功能

### 2. 内存使用
1. 监控引导过程中的内存使用情况
2. 验证引导结束后是否正确清理资源

## 无障碍访问测试

### 1. 键盘导航
1. 使用Tab键在引导元素间导航
2. 验证所有交互元素是否可以通过键盘访问

### 2. 屏幕阅读器
1. 使用屏幕阅读器测试引导内容
2. 验证提示文本是否清晰易懂

## 常见问题排查

### 1. 引导不显示
- 检查localStorage中是否有`paperDetail_tutorial_shown = 'true'`
- 验证是否在开发模式下运行
- 检查控制台是否有JavaScript错误

### 2. 高亮区域位置错误
- 检查目标元素是否正确设置了ref属性
- 验证元素是否在DOM中存在
- 检查CSS样式是否影响元素定位

### 3. 提示框超出屏幕
- 检查`tooltipStyle`计算属性中的定位逻辑
- 验证窗口尺寸检测是否正确
- 测试不同屏幕尺寸下的表现

### 4. 动画效果异常
- 检查CSS动画定义是否正确
- 验证浏览器是否支持相关CSS特性
- 测试不同浏览器的兼容性

## 测试报告模板

```
测试日期：____年____月____日
测试环境：____浏览器版本____
测试人员：____

功能测试结果：
□ 自动启动正常
□ 引导步骤完整
□ 交互功能正常
□ 响应式设计正常
□ 状态管理正常
□ 错误处理正常
□ 性能表现良好
□ 无障碍访问正常

发现的问题：
1. ____
2. ____
3. ____

建议改进：
1. ____
2. ____
3. ____

总体评价：□ 通过 □ 需要修复 □ 不通过
``` 