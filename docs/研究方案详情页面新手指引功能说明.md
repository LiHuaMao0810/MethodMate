# 研究方案详情页面新手指引功能说明

## 功能概述

在研究方案详情页面（ResearchPlanDetail.vue）中新增了新手指引功能，帮助用户快速了解各个功能按钮的作用和页面布局。

## 功能特性

### 1. 自动引导
- 首次访问页面时自动启动新手指引
- 按顺序介绍7个核心功能按钮
- 智能定位和高亮显示当前介绍的元素

### 2. 引导步骤
1. **生成研究方案** - 介绍核心的AI方案生成功能
2. **方案导航** - 说明不同方案部分的切换方式
3. **方案评估** - 介绍AI评估方案完整性的功能
4. **方案迭代** - 说明根据用户建议优化方案的功能
5. **生成来源介绍** - 介绍基于参考文献生成来源说明的功能
6. **生成方法介绍** - 说明生成研究方法介绍的功能
7. **统计方法查询** - 介绍统计方法查询工具的使用

### 3. 交互方式

#### 鼠标操作
- 点击"知道了"按钮进入下一步
- 点击"跳过"按钮结束引导
- 点击"下次不提示"按钮设置不再显示引导

#### 键盘快捷键
- `Enter` 或 `空格键` - 进入下一步
- `Esc` - 跳过引导
- `←` `→` 方向键 - 切换步骤

### 4. 视觉设计
- 半透明遮罩层突出当前元素
- 蓝色高亮边框和脉冲动画效果
- 引导提示框带有淡入动画
- 进度指示器显示当前步骤位置

### 5. 状态管理
- 使用 localStorage 记录引导完成状态
- 支持开发模式下的重置功能
- 自动检测是否需要显示引导

## 技术实现

### 核心组件
```javascript
// 引导状态
const showTutorial = ref(false)
const currentTutorialStep = ref(0)

// DOM元素引用
const generatePlanBtnRef = ref(null)
const fullSectionBtnRef = ref(null)
const evaluateBtnRef = ref(null)
const iterateBtnRef = ref(null)
const sourceIntroBtnRef = ref(null)
const methodIntroBtnRef = ref(null)
const statisticalQueryBtnRef = ref(null)
const statisticalQueryInputRef = ref(null)
```

### 引导步骤配置
```javascript
const tutorialSteps = [
  {
    title: '生成研究方案',
    description: '点击这个按钮可以生成定量的研究方案，AI会根据您的需求和参考文献智能生成完整的研究设计。',
    ref: generatePlanBtnRef
  },
  // ... 其他步骤
]
```

### 样式动画
- `tutorial-highlight` - 高亮区域脉冲动画
- `tutorial-tooltip` - 提示框淡入动画
- 响应式定位避免超出屏幕边界

## 使用方法

### 用户端
1. 首次访问研究方案详情页面时自动启动引导
2. 按照提示逐步了解各个功能
3. 可选择跳过或设置不再提示

### 开发端
1. 在开发模式下，页面右下角会显示"重置引导"按钮
2. 点击重置按钮可清除引导完成状态，重新测试引导功能
3. 引导状态存储在 `localStorage` 的 `researchPlanDetail_tutorial_shown` 键中

## 自定义配置

### 添加新的引导步骤
1. 在模板中为目标元素添加 `ref` 属性
2. 在 `tutorialSteps` 数组中添加新的步骤配置
3. 更新步骤描述和标题

### 修改样式
- 高亮样式：修改 `.tutorial-highlight` 类
- 提示框样式：修改 `.tutorial-tooltip` 类
- 动画效果：调整 `@keyframes` 定义

### 调整行为
- 自动启动条件：修改 `shouldShowTutorial()` 函数
- 键盘快捷键：修改 `handleKeydown()` 函数
- 定位逻辑：调整 `tooltipStyle` 计算属性

## 注意事项

1. **性能优化** - 引导只在首次访问时显示，避免重复加载
2. **响应式设计** - 提示框位置会根据屏幕尺寸自动调整
3. **无障碍访问** - 支持键盘操作，符合无障碍设计标准
4. **错误处理** - 当目标元素不存在时优雅降级

## 与文献推荐页面的区别

### 引导步骤数量
- 文献推荐页面：6个步骤
- 研究方案详情页面：7个步骤

### 功能重点
- 文献推荐页面：重点介绍搜索和文献管理功能
- 研究方案详情页面：重点介绍方案生成和优化功能

### 存储键名
- 文献推荐页面：`paperDetail_tutorial_shown`
- 研究方案详情页面：`researchPlanDetail_tutorial_shown`

## 未来扩展

1. **多语言支持** - 根据用户语言设置显示不同语言的引导
2. **个性化引导** - 根据用户行为调整引导内容
3. **引导录制** - 支持用户自定义引导步骤
4. **引导统计** - 收集引导完成率等数据
5. **跨页面引导** - 实现从文献推荐到方案生成的完整引导流程 