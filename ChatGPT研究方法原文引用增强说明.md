# ChatGPT研究方法原文引用增强说明

## 更新概述

为了提升ChatGPT提取研究方法时的准确性和可信度，我们对ChatGPT的提示词进行了重大增强，强化了原文引用功能。

## 主要改进

### 1. 增强的引用要求

**之前的要求：**
- 请务必引用原文内容来支持你的提炼结果
- 对于关键的方法描述，可以适当保留原文的专业术语
- 回答不少于1000字

**现在的要求：**
- **必须引用原文**：每个部分都必须包含原文引用，使用引号标注原文内容
- **引用格式**：使用"原文内容"的方式引用，例如：作者提到"We used a randomized controlled trial design..."
- **关键术语保留**：对于专业术语和具体数据，必须保留原文表述
- **引用比例**：每个部分至少包含2-3处原文引用
- **回答长度**：不少于1500字，确保充分引用和解释

### 2. 具体的输出格式示例

为每个框架部分提供了详细的引用示例：

#### 研究假设
```
示例：作者在文中提出"We hypothesized that..."，具体表述为"[直接引用原文假设内容]"。
```

#### 实验设计
```
示例：研究采用了"[引用原文设计描述]"的实验方法，作者明确指出"[引用具体实验流程]"。被试特征为"[引用被试描述]"，实验程序包括"[引用程序描述]"。
```

#### 数据分析
```
示例：在数据分析方面，作者使用了"[引用统计方法原文]"，并说明"[引用分析过程原文]"。数据处理采用"[引用数据处理方法]"。
```

#### 结果呈现
```
示例：结果展示采用"[引用结果呈现方式原文]"的形式，作者表示"[引用结果描述原文]"。图表类型包括"[引用图表描述]"。
```

### 3. 双重保障机制

增强功能应用于两个函数：

1. **主要处理函数** (`processFullText`)：ChatGPT直接处理全文时的增强引用
2. **备用处理函数** (`generateMethodSummary`)：当主要方法失败时的备用增强引用

确保无论使用哪种处理路径，ChatGPT都会进行充分的原文引用。

## 技术实现

### 修改的文件
- `server/local-api.js` - 增强ChatGPT提示词

### 关键变化

#### 1. processFullText函数增强
```javascript
// 增强的ChatGPT引用要求
const chatgptAdditionalRequirement = `
5. **必须引用原文**：每个部分都必须包含原文引用，使用引号标注原文内容
6. **引用格式**：使用"原文内容"的方式引用，例如：作者提到"We used a randomized controlled trial design..."
7. **关键术语保留**：对于专业术语和具体数据，必须保留原文表述
8. **引用比例**：每个部分至少包含2-3处原文引用
9. **回答长度**：不少于1500字，确保充分引用和解释`;
```

#### 2. generateMethodSummary函数增强
```javascript
// 根据AI服务类型构建不同的提示词
const chatgptAdditionalRequirement = `
6. **必须引用原文**：每个部分都必须包含原文引用，使用引号标注原文内容
7. **引用格式**：使用"原文内容"的方式引用，保持专业术语和具体数据
8. **引用比例**：每个部分至少包含2处原文引用
9. **回答长度**：不少于1200字，确保充分引用和解释`;
```

## 使用效果

### 预期改进

1. **更高的准确性**：通过引用原文，减少AI的主观解释和误读
2. **更强的可信度**：用户可以看到具体的原文支撑，增强信任度
3. **更丰富的内容**：1500字的要求确保提供足够详细的方法描述
4. **更好的可验证性**：原文引用让用户能够回到原文进行验证

### 示例对比

**之前的输出可能是：**
```
## 研究假设
该研究假设用户界面的改进会提升用户体验。
```

**现在的输出将是：**
```
## 研究假设
作者在研究中明确提出"We hypothesized that the improved user interface design would significantly enhance user experience and reduce task completion time"。具体来说，研究假设包括"H1: The new interface will reduce average task completion time by at least 20%" 和 "H2: Users will report higher satisfaction scores with the improved design"。这些假设基于前期的用户调研和文献综述结果。
```

## 兼容性说明

- ✅ **完全向后兼容**：只影响ChatGPT模式，Coze模式保持不变
- ✅ **自动识别**：系统会自动检测AI服务类型并应用相应的提示词
- ✅ **渐进增强**：原有功能不受影响，仅增强了引用能力

## 测试建议

1. **测试不同类型的论文**：实验性研究、调查研究、设计研究等
2. **验证引用质量**：检查引用是否准确、完整、有意义
3. **检查输出长度**：确保达到1500字的最低要求
4. **测试备用机制**：确保generateMethodSummary也能正常引用

## 后续优化

1. **引用质量评估**：可以考虑添加引用质量评分机制
2. **格式化改进**：未来可以考虑更标准化的引用格式
3. **多语言支持**：为中英文混合论文优化引用策略

---

**更新日期**：2024年12月
**影响范围**：ChatGPT研究方法提取功能
**测试状态**：待测试验证 